global webpublic procedure WebFindAndFixItems()
begin
	record RHistVc RHr;
	boolean TrHs,testf;
	vector integer vrstr;
  array string 20 keys;
  integer i,j,counter;
  string 10 c;
  string 50 recname,compnr,mainkey;
  integer cter,pref,check;
  longint kkk;
  area workarea;
  record INVc INr,OrigINr;
  
  setcompany(1,false);
  
  kkk = 1;
	RHr.TransDate = stringtodate("12/02/2020");
	RHr.User = "IRKAKH";
	
	TrHs = true;
	while(loopkey("UserDateTime",RHr,2,TrHs))begin
		testf = true;
		if(RHr.TransDate!=stringtodate("12/02/2020"))then begin TrHs = false; end;
		if(RHr.User!="IRKAKH")then begin TrHs = false; end;
		
		
		
		if(testf)then begin
			testf = TrHs;
		end;
		
		if(testf)then begin
			setareazerosize(workarea);
			addtexttoarea(RHr.RecidStr,workarea);
			c = getstringfromarea(workarea,0,1);//left(RHr.RecidStr,1);
			pref = asc(c) + 1;
			compnr = getstringfromarea(workarea,1,asc(c));//mid(RHr.RecidStr,1,asc(c));
			recname = "";
			mainkey = "";
			cter = 0;
			if(pref<getarealength(workarea))then begin
				for(j=pref;j<getarealength(workarea);j=j+1)begin
					c = getstringfromarea(workarea,j,1);//mid(RHr.RecidStr,j,1);
					if(asc(c)==0)then begin
						if((j+asc(c))<getarealength(workarea))then begin
							mainkey = getstringfromarea(workarea,j+asc(c),getarealength(workarea)-(j+asc(c)));
						end;
						j = getarealength(workarea);
					end else begin
						recname = recname & c;
					end;
				end;
			end else begin
			end;
			
		end;
		
		if(testf)then begin
			if(recname=="INVc")then begin
				weboutstring(kkk & " compnr " & compnr & "_____record " & recname & " mainkey " & mainkey & "|" & RHr.RecidStr);
				weboutstring("<BR>");
				kkk = kkk + 1;
				setcompany(stringtoint(compnr),false);
					INr.Code = mainkey;
					if(readfirstmain(INr,1,true))then begin
						ReadOriginalRecord(RHr,OrigINr);	
						if(blank(INr.BPIBrand) and nonblank(OrigINr.BPIBrand))then begin
							weboutstring("---------- BLANK BPAND " & OrigINr.BPIBrand);
						end;
					end;
				resetcompany(1);
			end;
			//logtext(0,"compnr " & compnr & "_____record " & recname & " mainkey " & mainkey);
		end;
		
	end;
	
return;
end;